## 분석 시나리오 작성 순서 및 방안

**문제의 요구에 따라 해당 기능을 제공하는 클라우드 플랫폼을 언급할것**



0. 반응변수의 분포가 어떤가?
   - 반응변수가 categorical 이라면 클래스 불균형 문제가 있는가, 불균형 문제가 있다면 -> undersampling oversampling 등등 기법 활용
   
   - 반응변수가 numeric 이라면 분포 확인 -> skewed(주로 skewed to the right) 되어 있다면 예측력 상승을 위해 log transpormation 과 같은 조치 필요.
   
   - 추가적으로 ,반응변수를 지정해서 사용해야 하는 경우라면
   
     어떤 "기준" 으로 반응변수를 라벨링 해 주어야 할지 여부도 적어 주어야 한다. (ex. 1 이상이면 불량, 이하면 양품, 시간별 불량률인지, 일별 불량률인인지 등등)



1. 설명변수로 무엇을 사용 할 것인가 ? 

   - 수치형 변수는 무엇이고, 범주형 변수는 무엇인지

     -> 수치형 변수에 대해서는 단위를 맞춰주는 표준화 작업 필요, 범주형 변수는 one-hot-encoding 필요

   - 변수에 결측치가 존재하는지

     -> 존재한다면 결측값 처리를 어떻게 진행 할 것인지 

      많지 않다면 결측값이 존재하는 행을 삭제, 변수에서 결측값의 비율이 90%를 넘어가면 변수 삭제 고려 

     적절하게 존재한다면 imputation 시행
     
   - 파생 변수 생성이 필요하다면? 

     -> 사용자 별 요약 통계량(min, max, median, mean 3q 등등)을 생성하는 것이 가장 일반적임( 특히, 시계열 분석에서)

     통계량을 생성 할 시에는 축을 여러가지로 고려 해 보는 것이 좋은데, 첫번째는 시간순(day, week, month )으로 통계량을 생성 하는 것이고 두번째는 주요 카테고리 별 요약 통계량을 생성 하는 것임. (ex, 설명변수로 품목 변수가 있다면 품목 별 요약 통계량 생성)

     -> 특히 시계열 분석에서 결합하고자 하는 설명변수들의 시간 단위(초/분/시간)이 맞지 않은 경우가 있음. 그런 경우에는 상위 시간에 맞춰 하위 시간을 통합하여 결합을 진행하여야 함. 

     ex) 초 단위 변수와 분 단위 변수를 결합해야 한다면 초 단위 데이터를 분 단위 데이터로 변경하여야 하고, 이를 진행하기 위한 요약 통계량을 생성 하는 것이 좋다. (Min / Max / Mean / Mode)

   - 데이터간 merge를 통해 설명변수를 추가 구성 해야 할 때?

     -> 키 값을 늘 생각하며 언급 해 주는 것이 좋음! 어떤 변수를 기준으로 데이터를 병합 할 것인지

   - 설명변수를 고려 할 때는 ID 및 시간변수를 항상 고민하기 / 텍스트로 이루어진 설명변수도 고민하기(범주를 묶는식으로 전처리를 진행할지, 아예 변수를 사용하지 않을 지 등등)

     

2. 모델은 무엇을 사용 할 것인가 ?

   - 예측이 중요한지/ 설명력이 중요한지 

     설명력이 중요한 모형 -> GLM/Tree 모형

     예측력이 중요한 모형 -> 앙상블 모형, 뉴럴넷

     -> ~~ 한 분석 목적에 따라 "`~" 이 좋은 모형을 사용하도록 하겠다 라는 가정을 적어주고 시작하면 됨. 

     ex) 불량 요인 분석이기 때문에 "설명력" 에 초점을 맞춘 모형을 사용하도록 하겠다

   - 설명변수의 타입이 어떤지

     주로 범주형 변수라면 -> GLM, Tree 모형 (뉴럴넷은 차원이 너무 커져서 힘듦)

     주로 수치형 변수라면 -> GLM, 뉴럴넷, 앙상블

     범주+ 수치 혼합 -> 대부분의 모형 다 가능

     결측값이 많이 존재하는 변수들이 있다면 

     -> Xgboost, LightGBM 은 결측값을 loss gain 이 큰 방향으로 밀어버리면서 처리

     -> NaiveBayes 는 결측값 무시

     -> rpart 의 Decision Tree 는 Surrogate feature(대체변수) 를 사용하여 모델링

   - 학습 기간은 어떻게 할 것인지?

     단순히 x변수들을 가지고 모델링을 한다 가 아니고 몇달간의 데이터를 사용해서~ 와 같이 학습 기간을 지정해 주는 것이 필요할 때가 있음.

     

3. 검증은 어떻게 진행 할 것인가? 

   - 하이퍼 파라미터 튜닝 시행 ->  검증의 신뢰도를 위해 5fold or 10fold Cross Validation 진행

   - 모델링 목적에 따라 MAPE/RMSE/Precision/Recall/accuracy 등등의 지표를 보고 판단

   - 추가적으로 마케팅 데이터와 같은 경우는 A/B test를 진행하여 모델의 효력을 검증하는 경우도 있음

   - 단순히 통계적인 검증방법 뿐만 아니라, 현업의 업무와 관련해서 어떤식으로 검증을 진행 할 것인지에 대한 부분도 적어주어야 함.

     

4. 기타

   시간에 따라 반응변수에 유의미한 차이가 있는 시계열 모형의 경우, Moving windows 의 검증 방식이 필요함.

   Arima 모형을 사용한 경우에는, 잔차에 자가상관이 없는지를 check 해야함.(포트만토 검정)

   추천 시스템의 경우 분석 목적에 따라 userbased CF인지 Itembased CF인지 고려, 그냥 헷갈리면 SVD 쓴다 하면될듯.

   추천시스템 평가 지표로는 map@k, recall@k와 같은 지표들을 주로 사용. 






